<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dashboard Test</title>
  <meta charset="utf-8">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://www.google.com/jsapi"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <link rel="stylesheet" href="css/style.css">
   <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Sistema IoT de Monitoreo y Posicionamiento</a>
    </div>
 
  </div>
</nav>
<!-- Zona de Scripts de Line Charts -->
<!-- Script de temperatura -->
 <script>
      function drawChartCelcius() {
          setInterval(function(){
        var jsonData = $.getJSON("NewServlet", function(result){
        }).done(function(results){
            var data = new google.visualization.DataTable();
          
          data.addColumn('datetime', 'Time');
          data.addColumn('number', 'Temperature');
          $.each(results, function (index, pos) {
              console.log(new Date(pos.x));
            data.addRow([
              (new Date(pos.x)),
              parseFloat(pos.y)
            ]);
          });
           var chart = new google.visualization.AreaChart($('#chart').get(0));
           
           var options = {
          title: 'Temperatura',
          height: 330,
          width: 550,
          hAxis: {title: 'Tiempo',  titleTextStyle: {color: 'black'}},
          vAxis: {viewWindowMode:'explicit',
            viewWindow: {
              max:40,
              min:10
            }, title:"Â°C",titleTextStyle: {
        fontSize: 25 // 12, 18 whatever you want (don't specify px)
    }},
titleTextStyle: {
        fontSize: 30 // 12, 18 whatever you want (don't specify px)
    },
          colors: ['red'],
          legend : { position:"none"}
          
        };
          chart.draw(data,options);
        });
    }, 500);
        }
        google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
      </script>

      <!-- Script de Luz -->
       <script>
      function drawChartLux() {
          setInterval(function(){
        var jsonData = $.getJSON("NewServletlux", function(result){
        }).done(function(results){
            var data = new google.visualization.DataTable();
          
          data.addColumn('datetime', 'Time');
          data.addColumn('number', 'Lux');
          $.each(results, function (index, pos) {
              console.log(new Date(pos.x));
            data.addRow([
              (new Date(pos.x)),
              parseFloat(pos.y)
            ]);
          });
           var chart = new google.visualization.AreaChart($('#chart1').get(0));
           
           var options = {
          title: 'Luminosidad',
          height:330,
          width:550,
          hAxis: {title: 'Tiempo',  titleTextStyle: {color: 'black'}},
          vAxis: {viewWindow: {
              max:70,
              min:0
            },title:'Lux',titleTextStyle: {
        fontSize: 25 // 12, 18 whatever you want (don't specify px)
    }},
titleTextStyle: {
        fontSize: 30 // 12, 18 whatever you want (don't specify px)
    },
          colors: ['Green'],
          legend : { position:"none"}
        };
          chart.draw(data,options);
        });
    }, 500);
        }
        google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);
    </script>
    <!-- Script de Tresh -->
     <script>
        function drawChartthresh() {
        setInterval(function(){
        var jsonData = $.getJSON("NewServlet2", function(result){
        }).done(function(results){
            var data = new google.visualization.DataTable();
          
          data.addColumn('datetime', 'Time');
          data.addColumn('number', 'Sonido');
          $.each(results, function (index, pos) {
              console.log(new Date(pos.x));
            data.addRow([
              (new Date(pos.x)),
              parseFloat(pos.y)
            ]);
          });
           var chart = new google.visualization.AreaChart($('#chart2').get(0));
           
           var options = {
          title: 'Nivel de sonido',
          width:550,
          height:330,
          hAxis: {title: 'Tiempo',  titleTextStyle: {color: 'black'}},
          vAxis: {viewWindow: {
              max:700,
              min:0
            },title:'Umbral',
            titleTextStyle: {
        fontSize: 25 // 12, 18 whatever you want (don't specify px)
    }
        },
          colors: ['Blue'],
          legend : { position:"none"},
              titleTextStyle: {
        fontSize: 30 // 12, 18 whatever you want (don't specify px)
    }
        };
          chart.draw(data,options);
        });
        google.charts.load('current', {'packages':['corechart']});
    }, 500);
        }
        
      google.charts.setOnLoadCallback(drawChart);
      </script>



  
<div class="container-fluid">
<div class="row">

<div class="col-md-4">
 <div id="chart" class="container" style="width: 100%;">
          <script> setInterval(drawChartCelcius(), 3000); </script>
      </div>
</div>
  
      
<div class="col-md-4">
    <style>
        .gauge {
        width: 550px;
        height: 250px;}
        
        .navbar-header {
    float: left;
    padding: 15px;
    text-align: center;
    width: 100%;
}
.navbar-brand {float:none;}
        
    </style>
     <div id="g1" class="gauge">
                        
                    </div>
                    
                
                <div class="text-center botones">
                     <script src="http://code.jquery.com/jquery-latest.min.js"></script>
                   <script>
                       $(document).ready(function() {
                        $("#Encender").click(function() {
                            $.post(
                        "ServletLed", 
                     {Encender : "1"}
                     )
                         });
                         $("#Apagar").click(function() {
                            $.post(
                        "ServletLed", 
                     {Apagar : "0"}
                     )
                         });
                        });
                   </script>
                    <button class="btn btn-success" type="submit" id="Encender">Encender</button>
           <button class="btn btn-danger" type="submit" id="Apagar">Apagar</button>
                </div>
</div>

<div class="col-md-4">
    
    
    
                 <div class="radar-wrapper">
                    <div id="cartesian">
                    <div class="cross-section"></div>
                    <div class="spinner"></div>
                        <div class="blip" id="ledsito"></div>
                        <div class="box"></div>
                                <!-- AIUDA ME MUERO!!!  -->
                                    <div class="xy0">5m</div>
                                         <div class="y300px">0m</div>
                                            <div class="y200px">1.2m</div>
                                                  <div class="y100px">2.2m</div>
                                                        <div class="x100px">2m</div>
                                                            <div class="x200px">4m</div>
                                                                 <div class="x300px">6m</div>  
                    </div>
                </div>
       
    <!-- Script para posicionar un objeto dentro del radar y el sonido del radar -->
    <script>
        function conversion(ejeX, ejeY){
            var porcentaje="%";
            ejeX=0.1+ejeX;
            ejeY=100-ejeY;
            
            ejeXString=ejeX.toString()+porcentaje;
            ejeYString=ejeY.toString()+porcentaje;
            
            document.getElementById('ledsito').style.top = ejeYString;
            document.getElementById('ledsito').style.left = ejeXString;
        }
        
        setInterval(function(){
                var jsonData = $.getJSON("SePos", function(result){
                }).done(function(results){
                    $.each(results, function (index, pos) {
                       conversion(pos.x,pos.y);
                    });
                }); 
            },500);

        
        //Para poner la coordenada (0,0) X debe ser igual a 90% & Y debe ser igual a 1%
        //PARA PODER MOVER LOS DATOS EN EL CADA EJE 
        //
        //PARA EL EJE X ->    X= (1+X)
        //PARA EL EJE Y ->    Y= (90-Y)
        //
       //document.getElementById('ledsito').style.top = "47%";
       // document.getElementById('ledsito').style.left = "47%";
        
        var snd1 = new Audio("bleep.wav");
        
        function beep1(){
        snd1.play();
              }
              setInterval(beep1, 960);
              
        
        
    </script>
    
    
</div>

<div class="col-md-4">
  <div id="chart1" class="container" style="width: 100%;">
          <script> setInterval(drawChartLux(), 3000); </script>
      </div>
</div>

<div class="col-md-4">
    <div id="chart2" class="container" style="width: 100%;">
          <script> setInterval(drawChartthresh(), 3000); </script>
    </div>
</div>

<div class="col-md-4">
 <script>
        function drawChartRSI() {
        setInterval(function(){
        var jsonData = $.getJSON("RSIServlet", function(result){
        }).done(function(results){
            var data = new google.visualization.DataTable();
          data.addColumn('datetime', 'Time');
          data.addColumn('number', 'papata1');
          data.addColumn('number', 'papata2');
          data.addColumn('number', 'papata3');
          data.addColumn('number', 'papata4');
          data.addColumn('number', 'papata5');
          data.addColumn('number', 'papata6');
          $.each(results, function (index, pos) {
              console.log(new Date(pos.x));
            data.addRow([
              (new Date(pos.x)),
              parseFloat(pos.rssi_b1),
              parseFloat(pos.rssi_b2),
              parseFloat(pos.rssi_b3),
              parseFloat(pos.rssi_b4),
              parseFloat(pos.rssi_b5),
              parseFloat(pos.rssi_b6)
            ]);
          });
           var chart = new google.visualization.LineChart($('#rsi').get(0));
           
           var options = {
               width:550,
          height:330,
          title: 'RSSI',
          hAxis: {title: 'Tiempo',  titleTextStyle: {color: 'black'}},
          colors: ['Brown','blue','pink','purple','orange','gray'],
          legend : { position:"none"},
          vAxis: {viewWindow: {
              max:0,
              min:-150
            }
            
        },
        titleTextStyle: {
        fontSize: 30 // 12, 18 whatever you want (don't specify px)
    }
        };
          chart.draw(data,options);
        });
        google.charts.load('current', {'packages':['corechart']});
    }, 500);
        }
        
      google.charts.setOnLoadCallback(drawChart);
      </script> 
          <div id="rsi">
          <!-- ADJUNTAR AQUI LOS GRAFICOS MALDITA SEA :V !!!!!! -->
          <script>setInterval(drawChartRSI(), 3000);</script>
          </div>
</div>

</div>
  <script src="raphael-2.1.4.min.js"></script>
            <script src="justgage.js" ></script>
            <script>
                var g1 = new JustGage({
                id: "g1",
                title: "Angulo",
                value: 0,
                min: 0,
                max: 300,
                width: 500,
                decimals: 0,
                gaugeWidthScale: 1.1
            });
            setInterval(function(){
                var jsonData = $.getJSON("AngleServlet", function(result){
                }).done(function(results){
                    $.each(results, function (index, pos) {
                       g1.refresh(pos.y);
                    });
                }); 
            },500);
            </script>
            


</div>
  <!-- Script to enable google's chart approach -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
   <!--  <script src="https://www.google.com/jsapi"></script> -->
    <script src="https://www.gstatic.com/charts/loader.js"></script>
      <!-- Script para conseguir el tiempo de la maquina y poder usarlo en graficas en funcion del tiempo  -->
        <script>
            var nextTime = (function() {
                var currentTime = parseInt(new Date().getTime() / 1000);
                return function() { return currentTime++; }
            })();
        </script>
</body>
</html>
